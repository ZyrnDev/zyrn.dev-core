<!DOCTYPE html>
<html lang="en">

<head>
 <% include ../partials/head %>
 <link rel="stylesheet" type="text/css" href="/stylesheets/file-server.css">
 <style>
   p.message {
     background-color: rgba(0, 0, 0, 0.5);
     border-radius: 10px;
     margin: 2em, 0em;
     padding: 0.5em 0em;
     text-align: center;
   }
 </style>
</head>

<body>

<% include ../partials/menu %> 

<div class="body">
  <div class="container-fluid body">
      <div class="row">
        <div class="col-md"></div>  
        <div class="col-md-4">
          <h2><%= page.title %></h2>
          <form id="upload-form" method="POST" enctype="multipart/form-data">
            <div>
              <label id="lbl-upload-file"for="upload-file">Choose File</label>
              <input id="upload-file" type="file" name="document" />
              <input type="submit" value="Upload File" class="button">
            </div>
          </form>
          <a href="/uploads/" class="nice-link">View All Files</a>
        </div>  
        <div class="col-md"></div>  
      </div>  
  </div>    
</div>


</body>

<% include ../partials/script %>
<script>
  $("#upload-file").change(function () {
    // alert('Selected file: ' + this.value.replace(/.*[\/\\]/, ''));
    if (this.value){
      $("#lbl-upload-file").text(this.value.replace(/.*[\/\\]/, ''));
    } else {
      $("#lbl-upload-file").text("Choose File");
    }
  });
  $("#upload-form").submit(function (event) {
    if (!$("#upload-file")[0].value) {
      event.preventDefault();
      let message = $('<p class="message">Please choose a file to upload first</p>')
      message.insertAfter(this);
      setTimeout(function () {
        message.remove();
      }, 2500);
    }
  });
</script>

</html>
